
<style>
    html, body {
        height: 98.5%;
        background-color: #eeeeee;
    }
    .info {
        background-color: #fff;
        border: 2px #444 solid;
        border-radius: 7px;
        -webkit-box-shadow: 4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        box-shadow:         4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        color: #111;
        font-size: 13px;
        position: absolute;
        bottom:30em;
        left: 15em;
        z-index: 100;
        font-weight: bold;
        padding: .2em .5em;
        white-space: nowrap;
        line-height: 1.1em;
        text-align: center;
        z-index: 100;
    }
    .info:before {
        border-top: 6px solid transparent;
        border-bottom: 6px solid transparent;
        content: "";
        border-right: 6px solid black;
        border-right-color: inherit;
        position: absolute;
        left: -8px;
        top: 20px;
    }

    .infoh {
        background-color: #fff;
        border: 2px #444 solid;
        border-radius: 7px;
        -webkit-box-shadow: 4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        box-shadow:         4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        color: #111;
        font-size: 9px;
        position: absolute;
        bottom:1.5em;
        left: 2em;
        z-index: 100;
        font-weight: bold;
        padding: .2em .5em;
        white-space: nowrap;
        line-height: 1.1em;
        text-align: center;
        z-index: 100;
    }

    .infopop {
        background-color: #fff;
        border: 2px #444 solid;
        border-radius: 7px;
        -webkit-box-shadow: 4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        box-shadow:         4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        color: #111;
        font-size: 9px;
        position: absolute;
        bottom:1.5em;
        left: 16em;
        z-index: 100;
        font-weight: bold;
        padding: .2em .5em;
        white-space: nowrap;
        line-height: 1.1em;
        text-align: center;
        z-index: 100;
    }

    .infoh:before {
        /*border-top: 6px solid transparent;*/
        /*border-bottom: 6px solid transparent;*/
        /*content: "";*/
        /*border-right: 6px solid black;*/
        /*border-right-color: inherit;*/
        /*position: absolute;*/
        /*left: -8px;*/
        /*top: 20px;*/
    }

    tr td{
        text-align:center;
        padding:2px;
    }

    tr td b{
        text-align:right!important;
    }

    td.header_style{
        text-align: left;
    }

    .not_found{
        height:100%;
        /*margin-bottom: 50px;*/
    }
    .default{
        height:568px;

    }

    .success{
        color: green!important;
        font-weight: bolder!important;
        background-color: #00bfa5!important;
    }

    .failed{
        color: red;
        font-weight: bolder!important;
        background-color: #bf360c!important;
    }
</style>
<div class="row" >

<div class="col s12 m12 l12">
    <div class="col s12 z-depth-1" style="">
        <div class="section grey lighten-5 " >

            <div class="input-field col s6 grey lighten-5" >

                <select ng-change="selectPeriod()" ng-model="selectedYear"  material-select watch>
                    <option ng-selected="selectedYear" value="{{selectedYear}}">{{selectedYear}}</option>
                    <option ng-repeat="period in periods" ng-if="selectedYear!=period.name">{{period.name}}</option>
                </select>
                <label>Period</label>
            </div>
            <div class="input-field col s6 orgDropdown grey lighten-5"  >
                <multi-select-tree data-input-model="organisationUnitTree" multi-select="true"
                                   data-output-model="selectedItems" data-default-label="Organisation Units"
                                   data-callback="selectedCallback(item, selectedItems)"
                                   data-select-only-leafs="false"
                                   ></multi-select-tree>

            </div>
        </div>
    </div>

</div>
<h5 class="center">District Health Profile : {{ orgUnitNames }} - {{ selectedYear }}</h5>


    <div class="col s12 m12 l12" >
        <div class="">
        <div class="col s4 m4 l4"  >
            <div class="card z-depth-2 teal lighten-5 large">
                <div class="card-image waves-effect waves-block waves-light" style="overflow: scroll">
                    <div style="width: 100%" >

                        <div ng-show="dashboardObject.displayMap">
                            <p ng-if="!dashboardObject.map.layers" class="center">Loading ....</p>
                            <openlayers ng-if="dashboardObject.map.layers" ol-center="dashboardObject.map.Africa" ol-defaults="dashboardObject.map.defaults" custom-layers="true"  height="400px" >
                                <ol-layer ol-layer-properties="layer" name="test" ng-repeat="layer in dashboardObject.map.layers"></ol-layer>
                            </openlayers>
                        </div>


                        <div style="width: 100%" ng-if="dashboardObject.displayChart">
                            <highchart  config="dashboardObject.chart.chartObject"></highchart>
                        </div>

                        <div style="width: 100%" ng-if="dashboardObject.displayTable" >
                            <p ng-if="dashboardObject.table.loading" class="center"><img src="assets/img/loading.gif">Loading ....</p>
                            <table ng-if="!dashboardObject.table.loading" class="bordered striped centered" id="jinsi">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Submitted District Health Profile - {{selectedYear}}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr data-ng-repeat="column in dashboardObject.table.tableObject">
                                    <td>{{ $index+1 }}</td>
                                    <td style="text-align: left;">{{ column.name }}</td>
                                    <td><a href="{{column.url}}" target="_blank"><img style="width:30px!important;" src="assets/img/download.png"> </a></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>

                </div>
                <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4">{{ card.title }}<i class="material-icons mdi-navigation-more-vert right"></i></span>
                    <p>
                        <a ng-click="showMaps()" target="_blank"  title="Display Map" class="btn-floating btn-small waves-effect waves-light teal darken-2" style="padding-top: 5px;padding-left: 8px"><img src="assets/img/map.jpg" style="height: 20px;width: 20px"/></i></a>
                        <a ng-click="showCharts()" target="_blank"  title="Display Chart" class="btn-floating btn-small waves-effect waves-light teal darken-2" style="padding-top: 5px;padding-left: 8px"><img src="assets/img/pie.png" style="height: 20px;width: 20px"/></i></a>
                        <a ng-click="showTables()" target="_blank"  title="Display Table" class="btn-floating btn-small waves-effect waves-light teal darken-2" style="padding-top: 5px;padding-left: 8px"><img src="assets/img/table.jpg" style="height: 20px;width: 20px"/></i></a>
                        <button ng-csv="downloadCSV()" csv-header="getCSVHeader()" filename="submittedhealthprofile.csv" target="_blank"  title="Download CSV" class="btn-floating btn-small waves-effect waves-light teal darken-2" style="padding-top: 5px;padding-left: 8px"><img src="assets/img/cvs.jpg" style="height: 20px;width: 20px"/></i></button>

                        <a class="btn-floating btn-small waves-effect waves-light teal darken-2 right" modal href="#link{{ card.data }}"><i class="mdi-action-open-in-new"></i></a>
                    </p>
                </div>
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4">{{ card.title }}<i class="material-icons right">close</i></span>
                    <p class="flow-text">{{ card.description }}</p>
                    <table class="bordered">
                        <tr><td>Indicator Type</td><td>{{card.indicatorType}}</td></tr>
                        <tr><td>Numerator</td><td>{{card.numerator}}</td></tr>
                        <tr><td>Denominator</td><td>{{card.denominator}}</td></tr>
                    </table>
                </div>
            </div>

            <!--Model object for the card-->
            <div id="link{{ card.data }}" class="modal" style="border-radius: 10px;width: 90%;max-height: 100%">
                <div class="modal-content">
                    <h4 style="text-align: center">{{ card.title }}</h4>
                    <div style="width: 100%">
                        <highchart style="width: 86%" ng-if="!card.displayTable && !card.displayMap && !card.displayColumn" config="card.chartObject"></highchart>
                        <div id="c{{ card.data }}" ng-show="card.displayColumn" style="margin: 0 auto;width: 86%"></div>
                        <div style="width: 100%" ng-if="card.displayTable" >
                            <p ng-if="card.chartObject.loading" class="center"><img src="assets/img/loading.gif">Loading ....</p>
                            <h5 class="center">{{ card.title }}</h5>
                            <div ng-bind-html="card.table"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class=" modal-action modal-close waves-effect waves-green btn-flat">Close</button>
                </div>
            </div>
            <!--end of model object-->
        </div>
            <div class="col s12 m8 l8" >
                <div class="card z-depth-2 white lighten-5 large">
                    <p style="text-align: center;">HEALTH PROFILE SUMMARY TABLE</p>
                    <div class="card-image waves-effect waves-block waves-light" style="overflow: scroll">

                      <summary-table ></summary-table>
                    </div>
                    <div class="card-content">
                        <p>
                            <a ng-click="downloadCSV" target="_blank"  title="Download Excel" class="btn-floating btn-small waves-effect waves-light teal darken-2" style="padding-top: 5px;padding-left: 8px"><img src="assets/img/cvs.jpg" style="height: 20px;width: 20px"/></i></a>
                            <a class="btn-floating btn-small waves-effect waves-light teal darken-2 right" modal href="#summary_table"><i class="mdi-action-open-in-new"></i></a>
                        </p>
                    </div>
                    <div class="card-reveal">
                        <span class="card-title grey-text text-darken-4">{{ 'District Health Profile Summary Table - ' }} {{selectedYear}}<i class="material-icons right">close</i></span>
                        <p class="flow-text">{{ card.description }}</p>
                        <table class="bordered">
                            <tr><td>Indicator Type</td><td>{{card.indicatorType}}</td></tr>
                            <tr><td>Numerator</td><td>{{card.numerator}}</td></tr>
                            <tr><td>Denominator</td><td>{{card.denominator}}</td></tr>
                        </table>
                    </div>
                </div>

                <!--Model object for the card-->
                <div id="summary_table" class="modal" style="border-radius: 10px;width: 90%;max-height: 100%">
                    <div class="modal-content">
                        <h4 style="text-align: center">Here comes the title</h4>
                        <div style="width: 100%;overflow: scroll">
                            <summary-table ></summary-table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class=" modal-action modal-close waves-effect waves-green btn-flat">Close</button>
                    </div>
                </div>
                <!--end of model object-->
            </div>
        </div>
    </div>
</div>


<div id="login_modal" class="modal" style="border-radius: 10px;width: 60%;max-height: 100%">
    <div class="modal-content">
        <h4 style="text-align: center"></h4>
        <div style="width: 100%">
            <p style="font-weight: bolder;font-size: 14px;">DHP Login (DHIS2 users only)</p>
            <p style="color:red;font-weight: bolder;" ng-if="main.logedFailureMessage">{{main.logedFailureMessage}}</p>
            <p style="color:green;font-weight: bolder;" ng-if="main.logedSuccessMessage">{{main.logedSuccessMessage}}</p>
            <div class="row">
                <div class="preloader-wrapper small active" ng-if="progressLogin">
                    <div class="spinner-layer spinner-green-only">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div><div class="gap-patch">
                        <div class="circle"></div>
                    </div><div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                    </div>
                </div>
            </div>
            <form class="col s12" style="margin-top: 100px;">
                <div class="row">
                    <div class="input-field col s12">
                        <input id="email" type="text" class="validate" ng-model="login.dhis_login_username">
                        <label for="email">Username</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <input id="password" type="password" class="validate" ng-model="login.dhis_login_password">
                        <label for="password">Password</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12"><!--modal-close-->
                        <a class="waves-effect modal-action  waves-light btn  col s12 m12" style="background-color:#82b1ff" ng-click="main.login(login)">Login</a>
                    </div>
                </div>

            </form>
        </div>
    </div>
    <div class="modal-footer">
        <button class=" modal-action modal-close waves-effect waves-green btn-flat">Close</button>
    </div>
</div>